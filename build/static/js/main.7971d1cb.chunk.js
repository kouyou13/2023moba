(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{26:function(e,t,a){e.exports=a(42)},34:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(19),s=a.n(l),o=(a(34),a(14)),r=a(5),i=a(43),m=a(11);const p=e=>{let{Positions:t,centerPositions:a,sliderSelectLatLng:n}=e;return c.a.createElement(m.b,{async:!0,googleMapsApiKey:"AIzaSyCjpcBI57XAEzvIqzNBEj4eIpVzRaRe93U"},c.a.createElement(m.a,{id:"myMap",mapContainerStyle:{height:"100vh",width:"75vw"},zoom:22,center:a,mapOptions:{disabledDefaultUI:!0,zoomControl:!0,streetViewControl:!1,mapTypeControl:!1},mapTypeId:"satellite"},0!==Object.keys(n).length?c.a.createElement(m.c,{position:n,icon:"https://maps.google.com/mapfiles/ms/micons/red.png"}):c.a.createElement(c.a.Fragment,null),t.length>0?c.a.createElement(m.d,{path:t,options:{strokeColor:"#FFFF00",strokeOpacity:1,strokeWeight:1}}):c.a.createElement(c.a.Fragment,null)))};var u=e=>{let{Positions:t,centerPositions:a,sliderSelectLatLng:n}=e;return c.a.createElement("div",null,c.a.createElement(p,{Positions:t,centerPositions:a,sliderSelectLatLng:n}))},g=a(20),d=a(23),h=a(22),E=a(21);a(36);let b=[];var f=e=>{let{GetTimeList:t,AccessApi:a,setTimeDates:l,setPositions:s,setSelectedTime:o,setDatetimes:r}=e;const i=Object(n.useRef)(null),[m,p]=Object(n.useState)([]),u=new Date,f=Object(n.useRef)("".concat(u.getFullYear(),"-").concat(u.getMonth()+1,"-1")),v=Object(n.useRef)("".concat(u.getFullYear(),"-").concat(u.getMonth()+2,"-1")),S=Object(n.useCallback)(e=>{b.map(e=>e.date).includes(e.dateStr)?t(e.dateStr):(l([]),s([]),o(""),r([]))},[]);return c.a.createElement("div",{className:"calendar"},c.a.createElement(g.a,{ref:i,plugins:[d.a,E.a],initialView:"dayGridMonth",locale:h.a,events:m,dateClick:S,datesSet:e=>{(async e=>{const t=e.start,n=e.end;f.current="".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate()),v.current="".concat(n.getFullYear(),"-").concat(n.getMonth()+1,"-").concat(n.getDate());const c="https://ezaki-lab.cloud/~nict/api/get_date.php?start_date=".concat(f.current,"&end_date=").concat(v.current);b=[];try{const e=await a(c);for(let t=0;t<e.length;t++)b.push({title:"".concat(e[t].data_num,"\u56de\u5206"),date:e[t].date});p(b)}catch(l){}})(e)},contentHeight:"auto"}))};var v=e=>{let{TimeDates:t,GetPositions:a,selectedTime:n,setSelectedTime:l}=e;const s=e=>{l(e.target.value),a(e.target.value)};return c.a.createElement("div",{className:"TimeList"},t.length>0?t.map((e,t)=>c.a.createElement("label",{key:t},c.a.createElement("input",{type:"radio",name:"time",value:e.datetime,checked:n===e.datetime,onChange:s}),e.datetime,"\u304b\u3089",c.a.createElement("br",null))):c.a.createElement("p",null,"\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093"))};var S=e=>{let{datetimes:t,sliderSelectTime:a,setSliderSelectedTime:l}=e;const[s,o]=Object(n.useState)(0),[r,i]=Object(n.useState)("./no_image.png"),m=(e,t)=>{l(e),o(t);const a=e.split(" ")[0],n=e.replace("-","").replace("-","").replace(":","").replace(":","").replace(" ","_"),c="https://ezaki-lab.cloud/~nict/api/getImages.php?foldername=".concat(a,"&filename=").concat(n);((e,t)=>{const a=new Image;a.src=e,a.onload=function(){t(!0)},a.onerror=function(){t(!1)}})(c,e=>{i(e?c:"./no_image.png")})};return Object(n.useEffect)(()=>{t.length>0?m(t[0],0):(l(""),o(0),i("./no_image.png"))},[t]),c.a.createElement("div",{className:"ViewImage"},c.a.createElement("img",{className:"image",src:r,alt:"\u753b\u50cf",onClick:()=>{"./no_image.png"!==r&&window.open(r,"_blank")}}),c.a.createElement("br",null),c.a.createElement("input",{type:"range",className:"timeSlider",min:0,max:t.length-1,step:1,value:s,onChange:e=>{t.length>0&&m(t[e.target.value],e.target.value)}}),c.a.createElement("p",null,a))};a(37);var w=()=>{const e=Object(r.m)(),t=Object(r.o)(),a=e.state;console.log(a),null===a&&t("/Login");const[l,s]=Object(n.useState)([]),[o,m]=Object(n.useState)({lat:34.48520833,lng:136.8251525}),[p,g]=Object(n.useState)([]),[d,h]=Object(n.useState)(""),[E,b]=Object(n.useState)([]),[w,y]=Object(n.useState)(""),[O,j]=Object(n.useState)({});let T=[];const k=async e=>{try{return(await i.a.get(e)).data}catch(t){switch(console.log(e),t.response.status){case 400:case 401:console.log("\u8a8d\u8a3c\u30a8\u30e9\u30fc\u3067\u3059");break;case 404:console.log("URL\u5148\u304c\u306a\u3044\u3067\u3059");break;default:console.log(t)}throw t}},_=async e=>{const t="https://ezaki-lab.cloud/~nict/api/get_start_data.php?date=".concat(e),a=await k(t);T=a,await g(a)};return Object(n.useEffect)(()=>{(async()=>{if(""!==w){const e=w.replace(" ","_"),t="https://ezaki-lab.cloud/~nict/api/get_datetime_to_gps.php?datetime=".concat(e),a=await k(t);a.length>0?(a.forEach((function(e){for(var t in e)e[t]=parseFloat(e[t])})),j(a[0])):j({})}})()},[w]),Object(n.useEffect)(()=>{(async()=>{const e=new Date,t="".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate());await _(t),await g(T)})()},[]),c.a.createElement("div",{className:"Top"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,"\u65e5\u4ed8\u9078\u629e"),c.a.createElement(f,{GetTimeList:_,AccessApi:k,setTimeDates:g,setPositions:s,setSelectedTime:h,setDatetimes:b}),c.a.createElement("div",{className:"TimeListDiv"},c.a.createElement("hr",null),c.a.createElement("h1",null,"\u958b\u59cb\u6642\u523b"),c.a.createElement(v,{TimeDates:p,GetPositions:async e=>{const t=p.map(e=>e.datetime),a=t.indexOf(e);if(-1!==a){const e=t[a].replace(" ","_");let n;n=a!==t.length-1?t[a+1].replace(" ","_"):t[a].replace(" ","_");const c="https://ezaki-lab.cloud/~nict/api/get_gps.php?start_date=".concat(e,"&end_date=").concat(n);if(""!==c){const e=await k(c),t=e.map(e=>e.datetime);b(t),e.forEach((function(e){for(var t in e)e[t]=parseFloat(e[t])})),s(e),m(e[0])}}},selectedTime:d,setSelectedTime:h}),c.a.createElement("hr",null)),c.a.createElement("div",{className:"ViewImageDiv"},c.a.createElement("h1",null,"\u64ae\u5f71\u753b\u50cf"),c.a.createElement(S,{datetimes:E,sliderSelectTime:w,setSliderSelectedTime:y}))),c.a.createElement(u,{Positions:l,centerPositions:o,sliderSelectLatLng:O}))};var y=()=>{const[e,t]=Object(n.useState)(""),[a,l]=Object(n.useState)(""),s=Object(r.o)();return c.a.createElement("div",{className:"Login"},c.a.createElement("h1",null,"\u64ae\u5f71\u5730\u70b9\u53ef\u8996\u5316\u30b5\u30a4\u30c8"),c.a.createElement("div",{className:"LoginForm"},c.a.createElement("p",{className:"loginP"},"\u30e6\u30fc\u30b6\u30fc\u540d"),c.a.createElement("input",{type:"text",className:"loginText",placeholder:"Enter your username",onChange:e=>t(e.target.value),required:!0}),c.a.createElement("p",{className:"loginP"},"\u30d1\u30b9\u30ef\u30fc\u30c9"),c.a.createElement("input",{type:"password",className:"loginText",placeholder:"Enter your password",onChange:e=>l(e.target.value),required:!0}),c.a.createElement("br",null),c.a.createElement("button",{onClick:async()=>{if(""===e)alert("\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");else if(""===a)alert("\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");else{const t="https://ezaki-lab.cloud/~nict/api/check_user.php?username=".concat(e,"&password=").concat(a),n=await(async e=>{try{return(await i.a.get(e)).data}catch(t){switch(console.log(e),t.response.status){case 400:case 401:console.log("\u8a8d\u8a3c\u30a8\u30e9\u30fc\u3067\u3059");break;case 404:console.log("URL\u5148\u304c\u306a\u3044\u3067\u3059");break;default:console.log(t)}throw t}})(t);"error"===n?alert("\u30ed\u30b0\u30a4\u30f3\u30a8\u30e9\u30fc"):"no username"===n?alert("\u3053\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u306f\u5b58\u5728\u3057\u307e\u305b\u3093"):"no password"===n?alert("\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u7570\u306a\u308a\u307e\u3059"):s("/",{state:parseInt(n)})}},className:"loginBtn"},"\u30ed\u30b0\u30a4\u30f3")))};var O=()=>c.a.createElement(o.a,null,c.a.createElement(r.c,null,c.a.createElement(r.a,{path:"/",Component:w}),c.a.createElement(r.a,{path:"Login",Component:y})));var j=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,44)).then(t=>{let{getCLS:a,getFID:n,getFCP:c,getLCP:l,getTTFB:s}=t;a(e),n(e),c(e),l(e),s(e)})};s.a.createRoot(document.getElementById("root")).render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(O,null))),j()}},[[26,1,2]]]);
//# sourceMappingURL=main.7971d1cb.chunk.js.map