{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nobuoezaki/Desktop/ezaki-lab/2023moba/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/nobuoezaki/Desktop/ezaki-lab/2023moba/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/nobuoezaki/Desktop/ezaki-lab/2023moba/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// 参考 https://qiita.com/FumioNonaka/items/1810f7e211638988af62\nimport React,{useCallback,useRef,useState}from\"react\";import FullCalendar from\"@fullcalendar/react\";import dayGridPlugin from\"@fullcalendar/daygrid\";// pluginは、あとから\nimport allLocales from'@fullcalendar/core/locales-all';import interactionPlugin from\"@fullcalendar/interaction\";import\"./css/Calender.css\";import{jsx as _jsx}from\"react/jsx-runtime\";export var Calender=function Calender(_ref){var GetTimeList=_ref.GetTimeList,AccessApi=_ref.AccessApi,setTimeDates=_ref.setTimeDates,setPositions=_ref.setPositions;// const events = useRef([]);\nvar calendarRef=useRef(null);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),dates=_useState2[0],setDates=_useState2[1];var d=new Date();var startDate=useRef(\"\".concat(d.getFullYear(),\"-\").concat(d.getMonth()+1,\"-1\"));var endDate=useRef(\"\".concat(d.getFullYear(),\"-\").concat(d.getMonth()+2,\"-1\"));var event_date=[];var GetEvent=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(arg){var tempStartDate,tempEndDate,URL,data,i;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:tempStartDate=arg.start;tempEndDate=arg.end;startDate.current=\"\".concat(tempStartDate.getFullYear(),\"-\").concat(tempStartDate.getMonth()+1,\"-\").concat(tempStartDate.getDate());endDate.current=\"\".concat(tempEndDate.getFullYear(),\"-\").concat(tempEndDate.getMonth()+1,\"-\").concat(tempEndDate.getDate());URL=\"https://ezaki-lab.littlestar.jp/nict/api/get_date.php?start_date=\".concat(startDate.current,\"&end_date=\").concat(endDate.current);_context.prev=5;_context.next=8;return AccessApi(URL);case 8:data=_context.sent;for(i=0;i<data.length;i++){event_date.push({title:\"\",date:\"\".concat(data[i]['date'])});}setDates(event_date);_context.next=15;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](5);case 15:case\"end\":return _context.stop();}},_callee,null,[[5,13]]);}));return function GetEvent(_x){return _ref2.apply(this,arguments);};}();// 日付をクリックした時\nvar HandleDateClick=useCallback(function(arg){var selectDate=arg.dateStr;var events_date=event_date.map(function(item){return item.date;});if(events_date.includes(selectDate)){GetTimeList(arg.dateStr);}else{setTimeDates([]);setPositions([]);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);// 前後の月に移動した時 https://zenn.dev/takky94/articles/7d10cfc95c77de\nvar HandleDatesClick=function HandleDatesClick(arg){GetEvent(arg);};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(FullCalendar,{ref:calendarRef,plugins:[dayGridPlugin,interactionPlugin],initialView:\"dayGridMonth\"//表示の種類\n,locales:allLocales//全部を日本語化\n,locale:\"ja\"//日本語表記\n// イベントを表示 forで配列作って入れ込む?\n,events:dates,dateClick:HandleDateClick,datesSet:HandleDatesClick,contentHeight:\"auto\"// 高さを自動調整\n})});};","map":{"version":3,"names":["React","useCallback","useRef","useState","FullCalendar","dayGridPlugin","allLocales","interactionPlugin","jsx","_jsx","Calender","_ref","GetTimeList","AccessApi","setTimeDates","setPositions","calendarRef","_useState","_useState2","_slicedToArray","dates","setDates","d","Date","startDate","concat","getFullYear","getMonth","endDate","event_date","GetEvent","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","arg","tempStartDate","tempEndDate","URL","data","i","wrap","_callee$","_context","prev","next","start","end","current","getDate","sent","length","push","title","date","t0","stop","_x","apply","arguments","HandleDateClick","selectDate","dateStr","events_date","map","item","includes","HandleDatesClick","children","ref","plugins","initialView","locales","locale","events","dateClick","datesSet","contentHeight"],"sources":["/Users/nobuoezaki/Desktop/ezaki-lab/2023moba/src/Calender.js"],"sourcesContent":["// 参考 https://qiita.com/FumioNonaka/items/1810f7e211638988af62\nimport React, {useCallback, useRef, useState} from \"react\";\nimport FullCalendar from \"@fullcalendar/react\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\"; // pluginは、あとから\nimport allLocales from '@fullcalendar/core/locales-all';\nimport interactionPlugin from \"@fullcalendar/interaction\";\nimport \"./css/Calender.css\"\n\nexport const Calender = ({GetTimeList, AccessApi, setTimeDates, setPositions}) => {\n  // const events = useRef([]);\n  const calendarRef = useRef(null);\n  const [dates, setDates] = useState([]);\n  const d = new Date();\n  const startDate = useRef(`${d.getFullYear()}-${d.getMonth()+1}-1`);\n  const endDate = useRef(`${d.getFullYear()}-${d.getMonth()+2}-1`);\n  let event_date = [];\n\n  const GetEvent = async (arg) => {\n    const tempStartDate = arg.start;\n    const tempEndDate = arg.end;\n\n    startDate.current = `${tempStartDate.getFullYear()}-${tempStartDate.getMonth() + 1}-${tempStartDate.getDate()}`;\n    endDate.current = `${tempEndDate.getFullYear()}-${tempEndDate.getMonth() + 1}-${tempEndDate.getDate()}`;\n\n    const URL = `https://ezaki-lab.littlestar.jp/nict/api/get_date.php?start_date=${startDate.current}&end_date=${endDate.current}`;\n\n    try {\n      const data = await AccessApi(URL);\n      for (let i = 0; i < data.length; i++) {\n        event_date.push({ title: \"\", date: `${data[i]['date']}` });\n      }\n      setDates(event_date);\n    } catch (error) {\n      // エラーハンドリング\n    }\n  };\n\n  // 日付をクリックした時\n  const HandleDateClick = useCallback((arg) => {\n    const selectDate = arg.dateStr;\n    const events_date = event_date.map((item) => {\n      return item.date;\n    });\n    if(events_date.includes(selectDate)) {\n      GetTimeList(arg.dateStr);\n    }\n    else{\n      setTimeDates([]);\n      setPositions([]);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // 前後の月に移動した時 https://zenn.dev/takky94/articles/7d10cfc95c77de\n  const HandleDatesClick = (arg) => {\n    GetEvent(arg);\n  }\n\n  return(\n    <div>\n      <FullCalendar \n        ref={calendarRef}\n        plugins={[dayGridPlugin, interactionPlugin]} \n        initialView=\"dayGridMonth\" //表示の種類\n        locales={allLocales} //全部を日本語化\n        locale=\"ja\" //日本語表記\n        // イベントを表示 forで配列作って入れ込む?\n        events={dates}\n        dateClick={HandleDateClick}\n        datesSet={HandleDatesClick}\n        contentHeight=\"auto\" // 高さを自動調整\n      />\n    </div>\n  )\n}"],"mappings":"sZAAA;AACA,MAAO,CAAAA,KAAK,EAAGC,WAAW,CAAEC,MAAM,CAAEC,QAAQ,KAAO,OAAO,CAC1D,MAAO,CAAAC,YAAY,KAAM,qBAAqB,CAC9C,MAAO,CAAAC,aAAa,KAAM,uBAAuB,CAAE;AACnD,MAAO,CAAAC,UAAU,KAAM,gCAAgC,CACvD,MAAO,CAAAC,iBAAiB,KAAM,2BAA2B,CACzD,MAAO,oBAAoB,QAAAC,GAAA,IAAAC,IAAA,yBAE3B,MAAO,IAAM,CAAAC,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAAC,IAAA,CAA6D,IAAxD,CAAAC,WAAW,CAAAD,IAAA,CAAXC,WAAW,CAAEC,SAAS,CAAAF,IAAA,CAATE,SAAS,CAAEC,YAAY,CAAAH,IAAA,CAAZG,YAAY,CAAEC,YAAY,CAAAJ,IAAA,CAAZI,YAAY,CAC1E;AACA,GAAM,CAAAC,WAAW,CAAGd,MAAM,CAAC,IAAI,CAAC,CAChC,IAAAe,SAAA,CAA0Bd,QAAQ,CAAC,EAAE,CAAC,CAAAe,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA/BG,KAAK,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IACtB,GAAM,CAAAI,CAAC,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CACpB,GAAM,CAAAC,SAAS,CAAGtB,MAAM,IAAAuB,MAAA,CAAIH,CAAC,CAACI,WAAW,CAAC,CAAC,MAAAD,MAAA,CAAIH,CAAC,CAACK,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAI,CAAC,CAClE,GAAM,CAAAC,OAAO,CAAG1B,MAAM,IAAAuB,MAAA,CAAIH,CAAC,CAACI,WAAW,CAAC,CAAC,MAAAD,MAAA,CAAIH,CAAC,CAACK,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAI,CAAC,CAChE,GAAI,CAAAE,UAAU,CAAG,EAAE,CAEnB,GAAM,CAAAC,QAAQ,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,GAAG,MAAAC,aAAA,CAAAC,WAAA,CAAAC,GAAA,CAAAC,IAAA,CAAAC,CAAA,QAAAR,mBAAA,GAAAS,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACnBT,aAAa,CAAGD,GAAG,CAACW,KAAK,CACzBT,WAAW,CAAGF,GAAG,CAACY,GAAG,CAE3BxB,SAAS,CAACyB,OAAO,IAAAxB,MAAA,CAAMY,aAAa,CAACX,WAAW,CAAC,CAAC,MAAAD,MAAA,CAAIY,aAAa,CAACV,QAAQ,CAAC,CAAC,CAAG,CAAC,MAAAF,MAAA,CAAIY,aAAa,CAACa,OAAO,CAAC,CAAC,CAAE,CAC/GtB,OAAO,CAACqB,OAAO,IAAAxB,MAAA,CAAMa,WAAW,CAACZ,WAAW,CAAC,CAAC,MAAAD,MAAA,CAAIa,WAAW,CAACX,QAAQ,CAAC,CAAC,CAAG,CAAC,MAAAF,MAAA,CAAIa,WAAW,CAACY,OAAO,CAAC,CAAC,CAAE,CAEjGX,GAAG,qEAAAd,MAAA,CAAuED,SAAS,CAACyB,OAAO,eAAAxB,MAAA,CAAaG,OAAO,CAACqB,OAAO,EAAAL,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAGxG,CAAAjC,SAAS,CAAC0B,GAAG,CAAC,QAA3BC,IAAI,CAAAI,QAAA,CAAAO,IAAA,CACV,IAASV,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGD,IAAI,CAACY,MAAM,CAAEX,CAAC,EAAE,CAAE,CACpCZ,UAAU,CAACwB,IAAI,CAAC,CAAEC,KAAK,CAAE,EAAE,CAAEC,IAAI,IAAA9B,MAAA,CAAKe,IAAI,CAACC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAG,CAAC,CAAC,CAC5D,CACApB,QAAQ,CAACQ,UAAU,CAAC,CAACe,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAY,EAAA,CAAAZ,QAAA,sCAAAA,QAAA,CAAAa,IAAA,MAAAtB,OAAA,iBAIxB,kBAlBK,CAAAL,QAAQA,CAAA4B,EAAA,SAAA3B,KAAA,CAAA4B,KAAA,MAAAC,SAAA,OAkBb,CAED;AACA,GAAM,CAAAC,eAAe,CAAG5D,WAAW,CAAC,SAACmC,GAAG,CAAK,CAC3C,GAAM,CAAA0B,UAAU,CAAG1B,GAAG,CAAC2B,OAAO,CAC9B,GAAM,CAAAC,WAAW,CAAGnC,UAAU,CAACoC,GAAG,CAAC,SAACC,IAAI,CAAK,CAC3C,MAAO,CAAAA,IAAI,CAACX,IAAI,CAClB,CAAC,CAAC,CACF,GAAGS,WAAW,CAACG,QAAQ,CAACL,UAAU,CAAC,CAAE,CACnClD,WAAW,CAACwB,GAAG,CAAC2B,OAAO,CAAC,CAC1B,CAAC,IACG,CACFjD,YAAY,CAAC,EAAE,CAAC,CAChBC,YAAY,CAAC,EAAE,CAAC,CAClB,CACA;AACF,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,GAAM,CAAAqD,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAIhC,GAAG,CAAK,CAChCN,QAAQ,CAACM,GAAG,CAAC,CACf,CAAC,CAED,mBACE3B,IAAA,QAAA4D,QAAA,cACE5D,IAAA,CAACL,YAAY,EACXkE,GAAG,CAAEtD,WAAY,CACjBuD,OAAO,CAAE,CAAClE,aAAa,CAAEE,iBAAiB,CAAE,CAC5CiE,WAAW,CAAC,cAAe;AAAA,CAC3BC,OAAO,CAAEnE,UAAY;AAAA,CACrBoE,MAAM,CAAC,IAAK;AACZ;AAAA,CACAC,MAAM,CAAEvD,KAAM,CACdwD,SAAS,CAAEf,eAAgB,CAC3BgB,QAAQ,CAAET,gBAAiB,CAC3BU,aAAa,CAAC,MAAO;AAAA,CACtB,CAAC,CACC,CAAC,CAEV,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}