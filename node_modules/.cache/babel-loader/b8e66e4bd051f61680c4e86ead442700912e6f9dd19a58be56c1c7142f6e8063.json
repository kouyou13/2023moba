{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nobuoezaki/Desktop/ezaki-lab/2023moba/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/nobuoezaki/Desktop/ezaki-lab/2023moba/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/nobuoezaki/Desktop/ezaki-lab/2023moba/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Map}from'./Map';import{Calender}from'./Calender';import axios from'axios';import'./css/App.css';import{TimeList}from'./TimeList';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){// DOMに現れるものをuseState，表れないものをuseRefにする（レンダリングするかしないか）\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),Positions=_useState2[0],setPositions=_useState2[1];//緯度経度\nvar _useState3=useState({lat:34.48520833,lng:136.8251525}),_useState4=_slicedToArray(_useState3,2),centerPositions=_useState4[0],setCenterPositions=_useState4[1];//中心座標\nvar _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),TimeDates=_useState6[0],setTimeDates=_useState6[1];//開始時間時間\nvar _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),selectedTime=_useState8[0],setSelectedTime=_useState8[1];//選択した時間\nvar tempTimeDates=[];// APIからデータ取得\nvar AccessApi=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(URL){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(URL);case 3:response=_context.sent;return _context.abrupt(\"return\",response.data);case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(URL);_context.t1=_context.t0.response.status;_context.next=_context.t1===400?13:_context.t1===401?15:_context.t1===404?17:19;break;case 13:console.log('認証エラーです');return _context.abrupt(\"break\",20);case 15:console.log('認証エラーです');return _context.abrupt(\"break\",20);case 17:console.log('URL先がないです');return _context.abrupt(\"break\",20);case 19:console.log(_context.t0);case 20:throw _context.t0;case 21:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function AccessApi(_x){return _ref.apply(this,arguments);};}();// 指定日の開始時間を取得\nvar GetTimeList=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(selectedDate){var URL,res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:// console.log(selectedDate);\nURL=\"http://ezaki-lab.littlestar.jp/nict/api/get_start_data.php?date=\".concat(selectedDate);_context2.next=3;return AccessApi(URL);case 3:res=_context2.sent;// console.log(res);\nsetTimeDates(res);tempTimeDates=res;setSelectedTime(res[0].datetime);GetPositions(res[0].datetime);case 8:case\"end\":return _context2.stop();}},_callee2);}));return function GetTimeList(_x2){return _ref2.apply(this,arguments);};}();// 指定日の緯度経度を取得\nvar GetPositions=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(checkedTime){var temp,checkedTimeIndex,startDate,endDate,URL,res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:temp=tempTimeDates.map(function(item){return item.datetime;});checkedTimeIndex=temp.indexOf(checkedTime);if(!(checkedTimeIndex!==-1)){_context3.next=14;break;}startDate=temp[checkedTimeIndex].replace(' ','_');if(checkedTimeIndex!==temp.length-1){endDate=temp[checkedTimeIndex+1].replace(' ','_');}else{endDate=temp[checkedTimeIndex].replace(' ','_');}URL=\"http://ezaki-lab.littlestar.jp/nict/api/get_gps.php?start_date=\".concat(startDate,\"&end_date=\").concat(endDate);console.log(URL);if(!(URL!=='')){_context3.next=14;break;}_context3.next=10;return AccessApi(URL);case 10:res=_context3.sent;res.forEach(function(item){for(var key in item){item[key]=parseFloat(item[key]);}});setPositions(res);setCenterPositions(res[0]);case 14:case\"end\":return _context3.stop();}},_callee3);}));return function GetPositions(_x3){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"date_div\",className:\"calendar_container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u65E5\\u4ED8\\u9078\\u629E\"}),/*#__PURE__*/_jsx(Calender,{GetTimeList:GetTimeList,AccessApi:AccessApi,setTimeDates:setTimeDates,setPositions:setPositions,setSelectedTime:setSelectedTime}),/*#__PURE__*/_jsx(TimeList,{TimeDates:TimeDates,GetPositions:GetPositions,selectedTime:selectedTime,setSelectedTime:setSelectedTime})]}),/*#__PURE__*/_jsx(Map,{Positions:Positions,centerPositions:centerPositions})]});};export default App;","map":{"version":3,"names":["React","useState","Map","Calender","axios","TimeList","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","Positions","setPositions","_useState3","lat","lng","_useState4","centerPositions","setCenterPositions","_useState5","_useState6","TimeDates","setTimeDates","_useState7","_useState8","selectedTime","setSelectedTime","tempTimeDates","AccessApi","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","URL","response","wrap","_callee$","_context","prev","next","get","sent","abrupt","data","t0","console","log","t1","status","stop","_x","apply","arguments","GetTimeList","_ref2","_callee2","selectedDate","res","_callee2$","_context2","concat","datetime","GetPositions","_x2","_ref3","_callee3","checkedTime","temp","checkedTimeIndex","startDate","endDate","_callee3$","_context3","map","item","indexOf","replace","length","forEach","key","parseFloat","_x3","className","children","id"],"sources":["/Users/nobuoezaki/Desktop/ezaki-lab/2023moba/src/App.js"],"sourcesContent":["import React, {useState} from 'react';\nimport {Map} from './Map';\nimport {Calender} from './Calender';\n\nimport axios from 'axios';\nimport './css/App.css';\nimport { TimeList } from './TimeList';\n\nconst App = () => {\n  // DOMに現れるものをuseState，表れないものをuseRefにする（レンダリングするかしないか）\n  const [Positions, setPositions] = useState([]); //緯度経度\n  const [centerPositions, setCenterPositions] = useState({ lat: 34.48520833, lng: 136.8251525}); //中心座標\n  const [TimeDates, setTimeDates] = useState([]); //開始時間時間\n  const [selectedTime, setSelectedTime] = useState(''); //選択した時間\n  let tempTimeDates = [];\n\n  // APIからデータ取得\n  const AccessApi = async (URL) => {\n    try {\n      const response = await axios.get(URL);\n      return response.data;\n    } catch (error) {\n      console.log(URL);\n      switch (error.response.status) {\n        case 400:\n          console.log('認証エラーです');\n          break;\n        case 401:\n          console.log('認証エラーです');\n          break;\n        case 404:\n          console.log('URL先がないです');\n          break;\n        default:\n          console.log(error);\n      }\n      throw error;\n    }\n  };\n\n  // 指定日の開始時間を取得\n  const GetTimeList = async (selectedDate) => {\n    // console.log(selectedDate);\n    const URL = `http://ezaki-lab.littlestar.jp/nict/api/get_start_data.php?date=${selectedDate}`;\n    const res = await AccessApi(URL);\n    // console.log(res);\n    setTimeDates(res);\n    tempTimeDates = res;\n    setSelectedTime(res[0].datetime);\n    GetPositions(res[0].datetime);\n  }\n\n  // 指定日の緯度経度を取得\n  const GetPositions = async (checkedTime) => {\n    const temp = tempTimeDates.map((item) => {\n      return item.datetime;\n    });\n    const checkedTimeIndex = temp.indexOf(checkedTime);\n    if(checkedTimeIndex !== -1) {\n      const startDate = temp[checkedTimeIndex].replace(' ', '_');\n      let endDate;\n      if(checkedTimeIndex !== temp.length - 1) {\n        endDate = temp[checkedTimeIndex + 1].replace(' ', '_');\n      }\n      else{\n        endDate = temp[checkedTimeIndex].replace(' ', '_');\n      }\n      const URL = `http://ezaki-lab.littlestar.jp/nict/api/get_gps.php?start_date=${startDate}&end_date=${endDate}`;\n      console.log(URL);\n\n      if(URL !== ''){\n        const res = await AccessApi(URL);\n        res.forEach(function (item) {\n          for (var key in item) {\n            item[key] = parseFloat(item[key]);\n          }\n        });\n        setPositions(res);\n        setCenterPositions(res[0])\n      }\n    }\n  }\n\n  return (\n    <div className=\"App\">\n      <div id=\"date_div\" className=\"calendar_container\">\n        <h1>日付選択</h1>\n        <Calender GetTimeList={GetTimeList} AccessApi={AccessApi} setTimeDates={setTimeDates} setPositions={setPositions} setSelectedTime={setSelectedTime}/>\n        <TimeList TimeDates={TimeDates} GetPositions={GetPositions} selectedTime={selectedTime} setSelectedTime={setSelectedTime}/>\n      </div>\n      <Map Positions={Positions} centerPositions={centerPositions}/>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}