{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nobuoezaki/Desktop/ezaki-lab/2023moba/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/nobuoezaki/Desktop/ezaki-lab/2023moba/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/nobuoezaki/Desktop/ezaki-lab/2023moba/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// 参考 https://qiita.com/FumioNonaka/items/1810f7e211638988af62\nimport React,{useCallback,useRef,useState}from\"react\";import FullCalendar from\"@fullcalendar/react\";import dayGridPlugin from\"@fullcalendar/daygrid\";// pluginは、あとから\nimport allLocales from'@fullcalendar/core/locales-all';import interactionPlugin from\"@fullcalendar/interaction\";import\"./css/Calender.css\";import{jsx as _jsx}from\"react/jsx-runtime\";export var Calender=function Calender(_ref){var GetTimeList=_ref.GetTimeList,AccessApi=_ref.AccessApi,setTimeDates=_ref.setTimeDates,setPositions=_ref.setPositions,setSelectedTime=_ref.setSelectedTime;// const events = useRef([]);\nvar calendarRef=useRef(null);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),dates=_useState2[0],setDates=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedDate=_useState4[0],setSelectedDate=_useState4[1];var d=new Date();var startDate=useRef(\"\".concat(d.getFullYear(),\"-\").concat(d.getMonth()+1,\"-1\"));var endDate=useRef(\"\".concat(d.getFullYear(),\"-\").concat(d.getMonth()+2,\"-1\"));var event_date=[];var GetEvent=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(arg){var tempStartDate,tempEndDate,URL,data,i;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:tempStartDate=arg.start;tempEndDate=arg.end;startDate.current=\"\".concat(tempStartDate.getFullYear(),\"-\").concat(tempStartDate.getMonth()+1,\"-\").concat(tempStartDate.getDate());endDate.current=\"\".concat(tempEndDate.getFullYear(),\"-\").concat(tempEndDate.getMonth()+1,\"-\").concat(tempEndDate.getDate());URL=\"https://ezaki-lab.littlestar.jp/nict/api/get_date.php?start_date=\".concat(startDate.current,\"&end_date=\").concat(endDate.current);event_date=[];_context.prev=6;_context.next=9;return AccessApi(URL);case 9:data=_context.sent;for(i=0;i<data.length;i++){event_date.push({title:\"\".concat(data[i]['data_num'],\"\\u56DE\\u5206\"),date:\"\".concat(data[i]['date'])});}setDates(event_date);_context.next=16;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](6);case 16:case\"end\":return _context.stop();}},_callee,null,[[6,14]]);}));return function GetEvent(_x){return _ref2.apply(this,arguments);};}();// 日付をクリックした時\nvar HandleDateClick=useCallback(function(arg){setSelectedDate(arg.dateStr);var events_date=event_date.map(function(item){return item.date;});if(events_date.includes(arg.dateStr)){GetTimeList(arg.dateStr);}else{setTimeDates([]);setPositions([]);setSelectedTime('');}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);// 前後の月に移動した時 https://zenn.dev/takky94/articles/7d10cfc95c77de\nvar HandleDatesClick=function HandleDatesClick(arg){GetEvent(arg);};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(FullCalendar,{ref:calendarRef,plugins:[dayGridPlugin,interactionPlugin],initialView:\"dayGridMonth\"//表示の種類\n,locales:allLocales//全部を日本語化\n,locale:\"ja\"//日本語表記\n// イベントを表示 forで配列作って入れ込む?\n,events:dates,dateClick:HandleDateClick,datesSet:HandleDatesClick,contentHeight:\"auto\"// 高さを自動調整\n})});};","map":{"version":3,"names":["React","useCallback","useRef","useState","FullCalendar","dayGridPlugin","allLocales","interactionPlugin","jsx","_jsx","Calender","_ref","GetTimeList","AccessApi","setTimeDates","setPositions","setSelectedTime","calendarRef","_useState","_useState2","_slicedToArray","dates","setDates","_useState3","_useState4","selectedDate","setSelectedDate","d","Date","startDate","concat","getFullYear","getMonth","endDate","event_date","GetEvent","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","arg","tempStartDate","tempEndDate","URL","data","i","wrap","_callee$","_context","prev","next","start","end","current","getDate","sent","length","push","title","date","t0","stop","_x","apply","arguments","HandleDateClick","dateStr","events_date","map","item","includes","HandleDatesClick","children","ref","plugins","initialView","locales","locale","events","dateClick","datesSet","contentHeight"],"sources":["/Users/nobuoezaki/Desktop/ezaki-lab/2023moba/src/Calender.js"],"sourcesContent":["// 参考 https://qiita.com/FumioNonaka/items/1810f7e211638988af62\nimport React, {useCallback, useRef, useState} from \"react\";\nimport FullCalendar from \"@fullcalendar/react\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\"; // pluginは、あとから\nimport allLocales from '@fullcalendar/core/locales-all';\nimport interactionPlugin from \"@fullcalendar/interaction\";\nimport \"./css/Calender.css\"\n\nexport const Calender = ({GetTimeList, AccessApi, setTimeDates, setPositions, setSelectedTime}) => {\n  // const events = useRef([]);\n  const calendarRef = useRef(null);\n  const [dates, setDates] = useState([]);\n  const [selectedDate, setSelectedDate] = useState(null);\n  const d = new Date();\n  const startDate = useRef(`${d.getFullYear()}-${d.getMonth()+1}-1`);\n  const endDate = useRef(`${d.getFullYear()}-${d.getMonth()+2}-1`);\n  let event_date = [];\n\n  const GetEvent = async (arg) => {\n    const tempStartDate = arg.start;\n    const tempEndDate = arg.end;\n\n    startDate.current = `${tempStartDate.getFullYear()}-${tempStartDate.getMonth() + 1}-${tempStartDate.getDate()}`;\n    endDate.current = `${tempEndDate.getFullYear()}-${tempEndDate.getMonth() + 1}-${tempEndDate.getDate()}`;\n\n    const URL = `https://ezaki-lab.littlestar.jp/nict/api/get_date.php?start_date=${startDate.current}&end_date=${endDate.current}`;\n\n    event_date = [];\n    try {\n      const data = await AccessApi(URL);\n      for (let i = 0; i < data.length; i++) {\n        event_date.push({ title: `${data[i]['data_num']}回分`, date: `${data[i]['date']}` });\n      }\n      setDates(event_date);\n    } catch (error) {\n      // エラーハンドリング\n    }\n  };\n\n  // 日付をクリックした時\n  const HandleDateClick = useCallback((arg) => {\n    setSelectedDate(arg.dateStr);\n    const events_date = event_date.map((item) => {\n      return item.date;\n    });\n    if(events_date.includes(arg.dateStr)) {\n      GetTimeList(arg.dateStr);\n    }\n    else{\n      setTimeDates([]);\n      setPositions([]);\n      setSelectedTime('');\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // 前後の月に移動した時 https://zenn.dev/takky94/articles/7d10cfc95c77de\n  const HandleDatesClick = (arg) => {\n    GetEvent(arg);\n  }\n\n  return(\n    <div>\n      <FullCalendar \n        ref={calendarRef}\n        plugins={[dayGridPlugin, interactionPlugin]} \n        initialView=\"dayGridMonth\" //表示の種類\n        locales={allLocales} //全部を日本語化\n        locale=\"ja\" //日本語表記\n        // イベントを表示 forで配列作って入れ込む?\n        events={dates}\n        dateClick={HandleDateClick}\n        datesSet={HandleDatesClick}\n        contentHeight=\"auto\" // 高さを自動調整\n      />\n    </div>\n  )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}